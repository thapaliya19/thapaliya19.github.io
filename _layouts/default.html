<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>{{ page.title | default: site.title }}</title>
  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
  <!-- Title & Description -->
  <title>{{ page.title | default: site.title }}</title>
  <meta name="description" content="{{ page.description | default: site.description }}">

    <!-- Jekyll SEO Tag -->
    {% seo %}
</head>
<body>
  <main>
    {{ content }}
  </main>

  <footer>
    <p>&copy; {{ site.time | date: '%Y' }} {{ site.title }} | Inspired from <a href="https://perfectmotherfuckingwebsite.com/">here</a>.</p>
  <!-- theme toggle -->
  <button id="theme-toggle">Toggle Theme</button>

  <!-- open all links in new tab -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      document.querySelectorAll('a').forEach(a => {
        // skip internal anchors
        const href = a.getAttribute('href') || "";
        if (!href.startsWith("#")) {
          a.setAttribute('target', '_blank');
          a.setAttribute('rel', 'noopener noreferrer');
        }
      });
    });
  </script>
  <script>
    (function() {
      const btn = document.getElementById('theme-toggle');
      const root = document.documentElement;

      // 1. Determine initial theme: stored → system → default to light
      const stored = localStorage.getItem('theme');
      if (stored === 'light' || stored === 'dark') {
        root.classList.add(stored);
      } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        root.classList.add('dark');
      } else {
        root.classList.add('light');
      }

      // 2. Update button text based on current class
      function updateBtn() {
        if (root.classList.contains('dark')) {
          btn.textContent = 'Switch to Light Mode';
        } else {
          btn.textContent = 'Switch to Dark Mode';
        }
      }
      updateBtn();

      // 3. Toggle and persist
      btn.addEventListener('click', () => {
        if (root.classList.contains('dark')) {
          root.classList.replace('dark','light');
          localStorage.setItem('theme','light');
        } else {
          root.classList.replace('light','dark');
          localStorage.setItem('theme','dark');
        }
        updateBtn();
      });
    })();
  </script>
</body>
</html>
